{# Allows the DOCTYPE to be set on a page by page basis #}
{%- block doctype %}
<!DOCTYPE html>
{% endblock -%}

{# Allows custom attributes to be added to the <html> tag #}
{%- block htmltag -%}
{% set lang = h.lang() %}
<!--[if IE 9]> <html lang="{{ lang }}" class="ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="{{ lang }}" {% if h.is_rtl_language() %} dir="rtl" {% endif %}>
<!--<![endif]-->
{%- endblock -%}


<head{% block headtag %}{% endblock %}>
    {%- block meta -%}
    <meta charset="utf-8" />
    <meta name="csrf_field_name" content="{{ g.csrf_field_name }}" />
    <meta name="{{ g.csrf_field_name }}" content="{{ csrf_token() }}" />

    {% block meta_generator %}
    <meta name="generator" content="ckan {{ h.ckan_version() }}" />
    {% endblock %}
    {% block meta_viewport %}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% endblock %}
    {%- endblock -%}
    <title>
        {%- block title -%}
        {%- block subtitle %}{% endblock -%}
        {%- if self.subtitle()|trim %} {{ g.template_title_delimiter }} {% endif -%}
        {{ g.site_title }}
        {%- endblock -%}
    </title>
    <!-- format: asset 'extension name / css filename' i think extension name includes filepath -->
    {% block styles %}
    {% set theme = h.get_rtl_theme() if h.is_rtl_language() else g.theme %}
    {% asset theme %}
    {% asset 'versiontree/downloadDatasets_style' %}
    {% endblock %}
    </head>
    <body>
        {%- block header %}
        {% include "header.html" %}
        {% endblock -%}
        <table>
            <tr>
                <td>        
                    <h3> Download through CLI </h3>
                    <div class="code-div"> 
                        <div class="sub-code-div">
                            <pre><code id="download-code" value="hello world">clearml-data get --id {{clearml_id}}</code></pre>
                        </div>
                        <div class="sub-code-div">
                            <button id="copy-button" onclick="copyCodeToClipboard()"><img src="http://clipground.com/images/copy-4.png" ></button>
                        </div>
                    </div>
                    <script>
                        function copyCodeToClipboard() {
                            // Get the code element
                            const codeElement = document.getElementById('download-code');
                    
                            // Get the code text
                            const codeText = codeElement.textContent;
                    
                            // Create a new textarea element and set its value to the code text
                            const textarea = document.createElement('textarea');
                            textarea.value = codeText;
                            textarea.setAttribute('readonly', '');
                            textarea.style.position = 'absolute';
                            textarea.style.left = '-9999px';
                            document.body.appendChild(textarea);
                    
                            // Select the text in the textarea
                            textarea.select();
                    
                            // Execute the copy command using the Clipboard API
                            navigator.clipboard.writeText(textarea.value)
                            .then(() => {
                                // Provide visual feedback to the user (optional)
                                alert('Code copied to clipboard!');
                            })
                            .catch((error) => {
                                console.error('Failed to copy code to clipboard:', error);
                            });
                    
                            // Cleanup: Remove the textarea element
                            document.body.removeChild(textarea);
                        }
                    </script> 
                </td>
            </tr>
            <tr>
                <td>
                    <a class="download-link" href="https://app.clear.ml/projects/{{project_title}}/experiments/{{clearml_id}}/output/artifacts/other/data/output">Go to Download Page </a>
                </td>
            </tr>
        </table>
        
        {%- block footer %}
        {% include "footer.html" %}
        {% endblock -%}

        {{ h.render_assets('style') }}
        {{ h.render_assets('script') }}
    </body>

</html>